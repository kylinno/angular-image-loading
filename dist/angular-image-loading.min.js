!function(){"use strict";angular.module("kylinno.angular",[]).directive("imgLoading",function(){return{restrict:"E",template:"<div/>",transclude:!1,replace:!0,scope:{imgSrc:"@",spinnerSrc:"@"},link:function(n,i,s){function e(){a.css({visibility:"hidden"}),i.addClass(s.spinnerClass)}function r(){a.css({visibility:"visible"}),i.removeClass(s.spinnerClass)}function t(){var n=i.prop("offsetWidth"),e=s.heightMultiplier*n;n&&e&&i.css("height",e+"px")}t();var a=angular.element(new Image),l=a.on("load",function(n){r()}),o=a.on("error",function(n){i.removeClass(s.spinnerClass)});a.attr("src",s.imgSrc),e(),i.append(a),i.addClass(s.imgLoadingClass),n.$on("destroy",function(){l(),o()})}}})}();
